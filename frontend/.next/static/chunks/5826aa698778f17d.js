(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64107,77545,e=>{"use strict";function t(e){if(!e)return"-";let t=new Date(e);return isNaN(t.getTime())?"-":new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)}e.i(6908),e.s(["formatDate",()=>t],77545),e.s([],64107)},67881,20783,91918,e=>{"use strict";var t=e.i(43476);e.i(64107);var s=e.i(6908);let r=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var a=e.i(71645);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let s=!1,r=e.map(e=>{let r=n(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():n(e[t],null)}}}}function l(...e){return a.useCallback(i(...e),e)}function o(e){var s;let r,n=(s=e,(r=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(a.isValidElement(s)){var n;let e,l,o=(n=s,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),u=function(e,t){let s={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==a.Fragment&&(u.ref=t?i(t,o):o),a.cloneElement(s,u)}return a.Children.count(s)>1?a.Children.only(null):null})).displayName=`${s}.SlotClone`,r),l=a.forwardRef((e,s)=>{let{children:r,...i}=e,l=a.Children.toArray(r),o=l.find(d);if(o){let e=o.props.children,r=l.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(n,{...i,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,t.jsx)(n,{...i,ref:s,children:r})});return l.displayName=`${e}.Slot`,l}e.s(["composeRefs",()=>i,"useComposedRefs",()=>l],20783);var u=o("Slot"),c=Symbol("radix.slottable");function d(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}function p({className:e,variant:a="default",size:n="default",isLoading:i=!1,disabled:l,children:o,asChild:c=!1,...d}){let p=()=>{if(l||i)return{};switch(a){case"default":return{background:"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)",boxShadow:"0 10px 25px -5px rgba(14, 165, 233, 0.4), 0 8px 10px -6px rgba(14, 165, 233, 0.4)"};case"secondary":return{background:"linear-gradient(135deg, #14b8a6 0%, #0d9488 100%)",boxShadow:"0 10px 25px -5px rgba(20, 184, 166, 0.4)"};default:return{}}},m=(0,s.cn)("inline-flex items-center justify-center rounded-xl font-bold transition-all duration-300 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed","hover:brightness-110 hover:-translate-y-0.5","active:translate-y-0",{default:"text-white",secondary:"text-white",outline:"border-2 border-blue-500 text-blue-600 hover:bg-blue-50",ghost:"hover:bg-blue-50 text-blue-600",link:"text-blue-600 underline-offset-4 hover:underline"}[a],{default:"h-10 px-4 py-2 text-base",sm:"h-8 px-3 py-1 text-sm rounded-lg",lg:"h-14 px-8 py-4 text-lg rounded-xl",icon:"h-10 w-10 p-2"}[n],e);return c?(0,t.jsx)(u,{className:m,style:p(),...d,children:o}):(0,t.jsxs)("button",{className:m,style:p(),disabled:l||i,...d,children:[i&&(0,t.jsx)(r,{className:"mr-2 h-5 w-5 animate-spin"}),o]})}e.s(["Slot",()=>u,"createSlot",()=>o],91918),e.s(["Button",()=>p],67881)},23750,e=>{"use strict";var t=e.i(43476);e.i(64107);var s=e.i(6908);let r=(0,e.i(71645).forwardRef)(({className:e,label:r,error:a,helperText:n,icon:i,size:l="default",...o},u)=>(0,t.jsxs)("div",{className:"space-y-2",children:[r&&(0,t.jsxs)("label",{className:"text-sm font-semibold text-slate-700",children:[r,o.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[i&&(0,t.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:i}),(0,t.jsx)("input",{ref:u,className:(0,s.cn)("flex w-full rounded-xl border-2 border-slate-200 bg-white px-4 py-2",i&&"pl-11",{default:"h-11 text-base",lg:"h-14 text-lg"}[l],"placeholder:text-slate-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","hover:border-slate-300","transition-all duration-200","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-slate-50",a&&"border-red-400 focus:ring-red-500 focus:border-red-500",e),...o})]}),a&&(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center",children:[(0,t.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a]}),n&&!a&&(0,t.jsx)("p",{className:"text-sm text-slate-500",children:n})]}));r.displayName="Input",e.s(["Input",0,r])},13609,e=>{"use strict";var t=e.i(66027),s=e.i(54616),r=e.i(12598),a=e.i(46696),n=e.i(15760);async function i(e){return(await n.apiClient.post("/salesperson/upgrade",e)).data}async function l(){return(await n.apiClient.get("/salesperson/profile")).data}async function o(e){return(await n.apiClient.put("/salesperson/profile",e)).data}async function u(e){return(await n.apiClient.post("/salesperson/company",e)).data}async function c(){return(await n.apiClient.get("/salesperson/experiences")).data}async function d(e){return(await n.apiClient.post("/salesperson/experiences",e)).data}async function p(e,t){return(await n.apiClient.put(`/salesperson/experiences/${e}`,t)).data}async function m(e){return(await n.apiClient.delete(`/salesperson/experiences/${e}`)).data}async function x(){return(await n.apiClient.get("/salesperson/certifications")).data}async function f(e){return(await n.apiClient.post("/salesperson/certifications",e)).data}async function h(e){return(await n.apiClient.delete(`/salesperson/certifications/${e}`)).data}async function b(){return(await n.apiClient.get("/salesperson/approval-status")).data}let y=["salesperson","profile"],g=["salesperson","status"],v=["salesperson","experiences"],j=["salesperson","certifications"],w=["salesperson","approval-status"];function N(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:i,onSuccess:t=>{e.invalidateQueries({queryKey:["auth","me"]}),e.invalidateQueries({queryKey:y}),e.invalidateQueries({queryKey:g}),a.toast.success(t.message||"升級申請已送出，請等待審核")},onError:e=>{let t=e.response?.data?.message||e.response?.data?.error||"升級失敗，請稍後再試";a.toast.error(t)}})}function C(){return(0,t.useQuery)({queryKey:y,queryFn:async()=>(await l()).data})}function Q(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:o,onSuccess:t=>{e.invalidateQueries({queryKey:y}),a.toast.success(t.message||"個人資料已更新")},onError:e=>{let t=e.response?.data?.message||"更新失敗，請稍後再試";a.toast.error(t)}})}function S(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:u,onSuccess:t=>{e.invalidateQueries({queryKey:y}),a.toast.success(t.message||"公司資訊已送出，等待審核")},onError:e=>{let t=e.response?.data?.message||"儲存失敗，請稍後再試";a.toast.error(t)}})}function k(){return(0,t.useQuery)({queryKey:v,queryFn:async()=>(await c()).data})}function q(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:d,onSuccess:t=>{e.invalidateQueries({queryKey:v}),a.toast.success(t.message||"工作經驗已新增")},onError:e=>{let t=e.response?.data?.message||"新增失敗，請稍後再試";a.toast.error(t)}})}function z(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:({id:e,data:t})=>p(e,t),onSuccess:t=>{e.invalidateQueries({queryKey:v}),a.toast.success(t.message||"工作經驗已更新")},onError:e=>{let t=e.response?.data?.message||"更新失敗，請稍後再試";a.toast.error(t)}})}function E(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:m,onSuccess:t=>{e.invalidateQueries({queryKey:v}),a.toast.success(t.message||"工作經驗已刪除")},onError:e=>{let t=e.response?.data?.message||"刪除失敗，請稍後再試";a.toast.error(t)}})}function K(){return(0,t.useQuery)({queryKey:j,queryFn:async()=>(await x()).data})}function M(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:f,onSuccess:t=>{e.invalidateQueries({queryKey:j}),e.invalidateQueries({queryKey:w}),a.toast.success(t.message||"證照已上傳，等待審核")},onError:e=>{let t=e.response?.data?.message||"上傳失敗，請稍後再試";a.toast.error(t)}})}function R(){let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:h,onSuccess:t=>{e.invalidateQueries({queryKey:j}),a.toast.success(t.message||"證照已刪除")},onError:e=>{let t=e.response?.data?.message||"刪除失敗，請稍後再試";a.toast.error(t)}})}function F(){return(0,t.useQuery)({queryKey:w,queryFn:async()=>(await b()).data})}e.s(["useApprovalStatus",()=>F,"useCertifications",()=>K,"useCreateCertification",()=>M,"useCreateExperience",()=>q,"useDeleteCertification",()=>R,"useDeleteExperience",()=>E,"useExperiences",()=>k,"useProfile",()=>C,"useSaveCompany",()=>S,"useUpdateExperience",()=>z,"useUpdateProfile",()=>Q,"useUpgradeToSalesperson",()=>N],13609)},77488,e=>{"use strict";var t=e.i(43476),s=e.i(53145),r=e.i(94814),a=e.i(81307),n=e.i(18566),i=e.i(71645),l=e.i(67881),o=e.i(23750),u=e.i(13609),c=e.i(24136);let d=a.z.object({full_name:a.z.string().min(2,"真實姓名至少需要 2 個字元").max(100,"真實姓名不能超過 100 個字元"),phone:a.z.string().regex(/^09\d{8}$/,"請輸入有效的手機號碼（例：0912345678）"),bio:a.z.string().max(500,"簡介不能超過 500 個字元").optional(),specialties:a.z.string().max(200,"專長不能超過 200 個字元").optional()});function p(){let e=(0,n.useRouter)(),{data:a,isLoading:p}=(0,c.useAuth)(),m=(0,u.useUpgradeToSalesperson)(),{register:x,handleSubmit:f,formState:{errors:h}}=(0,s.useForm)({resolver:(0,r.zodResolver)(d)});return((0,i.useEffect)(()=>{!p&&a&&"salesperson"===a.role&&e.push("/dashboard")},[a,p,e]),p)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,t.jsx)("div",{className:"max-w-3xl mx-auto py-8 px-4",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"升級為業務員"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2 text-base",children:"填寫以下資訊開始您的業務之旅"})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-1",children:"升級說明"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,t.jsx)("li",{children:"• 升級後需要等待管理員審核"}),(0,t.jsx)("li",{children:"• 審核通過前，您可以瀏覽和搜尋相關資訊"}),(0,t.jsx)("li",{children:"• 審核通過後，您可以建立公司資料、參與評分等"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:(0,t.jsxs)("form",{onSubmit:f(e=>{let t={...e,bio:e.bio||void 0,specialties:e.specialties||void 0,service_regions:[]};m.mutate(t)}),className:"space-y-6",children:[(0,t.jsx)(o.Input,{label:"真實姓名",type:"text",placeholder:"王小明",error:h.full_name?.message,helperText:"顯示在個人檔案的真實姓名",required:!0,...x("full_name")}),(0,t.jsx)(o.Input,{label:"手機號碼",type:"tel",placeholder:"0912345678",error:h.phone?.message,helperText:"格式：0912345678",required:!0,...x("phone")}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-slate-700",children:["個人簡介 ",(0,t.jsx)("span",{className:"text-slate-400",children:"(選填)"})]}),(0,t.jsx)("textarea",{rows:4,placeholder:"簡單介紹您的背景和經驗，讓客戶更認識您",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none",...x("bio")}),h.bio&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:h.bio.message}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"最多 500 個字元"})]}),(0,t.jsx)(o.Input,{label:"專長",type:"text",placeholder:"壽險、投資型保單、團體保險",error:h.specialties?.message,helperText:"選填，用逗號分隔多個專長",...x("specialties")}),(0,t.jsx)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[(0,t.jsx)("strong",{children:"提示："}),"服務地區可以之後在個人檔案中設定。"]})}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(l.Button,{type:"submit",className:"w-full text-lg font-bold tracking-wide",size:"lg",isLoading:m.isPending,children:m.isPending?"送出中...":"送出升級申請"})}),(0,t.jsx)("button",{type:"button",onClick:()=>e.back(),className:"w-full py-3 text-sm text-slate-600 hover:text-slate-800 font-medium transition-colors",children:"取消"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"管理公司資料"}),(0,t.jsx)("p",{className:"text-sm text-slate-700",children:"建立和管理公司資訊，讓客戶找到您的服務"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,t.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"參與評分"}),(0,t.jsx)("p",{className:"text-sm text-slate-700",children:"為其他業務員評分，建立專業的社群網絡"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"展示專業"}),(0,t.jsx)("p",{className:"text-sm text-slate-700",children:"建立完整的個人檔案，展示您的專業能力"})]})]})]})})}e.s(["default",()=>p])}]);