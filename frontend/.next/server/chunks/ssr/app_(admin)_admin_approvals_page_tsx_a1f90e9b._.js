module.exports=[73602,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(50463),g=a.i(54161),h=a.i(67453),i=a.i(41710),j=a.i(92e3);function k({status:a,size:c="sm",showIcon:d=!0}){let e=function(a){switch(a){case"approved":return{variant:"success",label:"已通過",icon:h.CheckCircle2,color:"text-green-600",bg:"bg-green-50"};case"pending":return{variant:"warning",label:"審核中",icon:i.Clock,color:"text-yellow-600",bg:"bg-yellow-50"};case"rejected":return{variant:"error",label:"已拒絕",icon:j.AlertCircle,color:"text-red-600",bg:"bg-red-50"};default:return{variant:"secondary",label:a,icon:i.Clock,color:"text-slate-600",bg:"bg-slate-50"}}}(a),f=e.icon;return(0,b.jsxs)(g.Badge,{variant:e.variant,size:c,children:[d&&(0,b.jsx)(f,{className:"mr-1 h-3 w-3"}),e.label]})}var l=a.i(60246),m=a.i(67900),n=a.i(93518),o=a.i(41961),p=a.i(62722);let q=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var r=a.i(41675),s=a.i(92258),t=a.i(63519),u=a.i(41586),v=a.i(96659);function w({isOpen:a,onClose:c,type:d,item:f,onApprove:g,onReject:i,isLoading:j}){return a&&f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:c}),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"詳細資訊"}),(0,b.jsx)("button",{onClick:c,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,b.jsx)(p.XCircle,{className:"h-5 w-5 text-slate-500"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:["users"===d&&(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-primary-50 rounded-xl",children:(0,b.jsx)(l.Users,{className:"h-8 w-8 text-primary-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:f.username}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,b.jsx)(s.Mail,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:f.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,b.jsx)(r.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["註冊時間：",(0,v.formatDate)(f.created_at)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-600",children:"狀態："}),(0,b.jsx)(k,{status:f.status})]})]})]})]})}),"companies"===d&&(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-50 rounded-xl",children:(0,b.jsx)(m.Building2,{className:"h-8 w-8 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:f.name}),(0,b.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"統一編號"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:f.tax_id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"產業類別"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:f.industry?.name||"未指定"})]})]}),f.address&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"地址"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:f.address})]}),f.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,b.jsx)(t.Phone,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:f.phone})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,b.jsx)(r.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["提交時間：",(0,v.formatDate)(f.created_at)]})]})]})]})]})}),"certifications"===d&&(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-green-50 rounded-xl",children:(0,b.jsx)(n.Award,{className:"h-8 w-8 text-green-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:f.name}),(0,b.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"發證單位"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:f.issuer})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"發證日期"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:(0,v.formatDate)(f.issue_date)})]})]}),f.expiry_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"到期日期"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1",children:(0,v.formatDate)(f.expiry_date)})]}),f.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"說明"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1 whitespace-pre-line",children:f.description})]}),f.file_url&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700 mb-2 block",children:"證照圖片"}),(0,b.jsx)("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:(0,b.jsx)("img",{src:f.file_url,alt:f.name,className:"w-full h-96 object-contain bg-slate-50"})})]})]})]})]})}),"experiences"===d&&(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-50 rounded-xl",children:(0,b.jsx)(o.Briefcase,{className:"h-8 w-8 text-purple-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900",children:f.position}),(0,b.jsx)("p",{className:"text-lg text-slate-600 mt-1",children:f.company}),(0,b.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600",children:[(0,b.jsx)(r.Calendar,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[(0,v.formatDate)(f.start_date)," -"," ",f.end_date?(0,v.formatDate)(f.end_date):"至今"]})]}),f.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"工作描述"}),(0,b.jsx)("p",{className:"text-slate-900 mt-1 whitespace-pre-line",children:f.description})]})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex gap-3 p-6 border-t border-slate-200",children:[(0,b.jsxs)(e.Button,{onClick:g,isLoading:j,className:"flex-1",children:[(0,b.jsx)(h.CheckCircle2,{className:"mr-2 h-4 w-4"}),"審核通過"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:i,disabled:j,className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,b.jsx)(p.XCircle,{className:"mr-2 h-4 w-4"}),"拒絕"]}),(0,b.jsx)(e.Button,{variant:"outline",onClick:c,disabled:j,children:"關閉"})]})]})})]}):null}function x(){let[a,g]=(0,c.useState)("users"),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)("users"),{data:p,isLoading:r}=(0,u.usePendingApprovals)(),s=(0,u.useApproveUser)(),t=(0,u.useRejectUser)(),x=(0,u.useApproveCompany)(),y=(0,u.useRejectCompany)(),z=(0,u.useApproveCertification)(),A=(0,u.useRejectCertification)(),B=(0,u.useApproveExperience)(),C=(0,u.useRejectExperience)();if(r)return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"待審核項目"}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-8",children:(0,b.jsx)(f.ProfileSkeleton,{})})})]});let D=[{id:"users",label:"業務員註冊",icon:l.Users,count:p?.users?.length||0,color:"primary"},{id:"companies",label:"公司資訊",icon:m.Building2,count:p?.companies?.length||0,color:"blue"},{id:"certifications",label:"專業證照",icon:n.Award,count:p?.certifications?.length||0,color:"green"},{id:"experiences",label:"工作經驗",icon:o.Briefcase,count:p?.profiles?.filter(a=>"pending"===a.approval_status).length||0,color:"purple"}],E=(()=>{switch(a){case"users":return p?.users||[];case"companies":return p?.companies||[];case"certifications":return p?.certifications||[];case"experiences":return p?.profiles?.filter(a=>"pending"===a.approval_status)||[];default:return[]}})(),F=D.find(b=>b.id===a),G=s.isPending||t.isPending||x.isPending||y.isPending||z.isPending||A.isPending||B.isPending||C.isPending;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"待審核項目"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"審核業務員註冊、公司資訊、證照與工作經驗"})]}),(0,b.jsx)("div",{className:"flex gap-4 flex-wrap",children:D.map(c=>{let d=c.icon;return(0,b.jsxs)("button",{onClick:()=>g(c.id),className:`
                flex items-center gap-3 px-6 py-3 rounded-xl font-medium transition-all
                ${a===c.id?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"bg-white text-slate-700 hover:bg-slate-50 border-2 border-slate-200"}
              `,children:[(0,b.jsx)(d,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:c.label}),c.count>0&&(0,b.jsx)("span",{className:`
                    px-2 py-0.5 text-xs font-semibold rounded-full
                    ${a===c.id?"bg-white text-primary-600":"bg-slate-200 text-slate-700"}
                  `,children:c.count})]},c.id)})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-6",children:E.length>0?(0,b.jsx)("div",{className:"space-y-4",children:E.map(c=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-2 border-slate-200 rounded-xl hover:border-primary-300 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,b.jsx)("div",{className:`p-3 bg-${F?.color}-50 rounded-xl`,children:F&&(0,b.jsx)(F.icon,{className:`h-6 w-6 text-${F.color}-600`})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h4",{className:"font-semibold text-slate-900",children:["users"===a&&c.username,"companies"===a&&c.name,"certifications"===a&&c.name,"experiences"===a&&c.position]}),(0,b.jsxs)("p",{className:"text-sm text-slate-600 mt-1",children:["users"===a&&c.email,"companies"===a&&`統編：${c.tax_id}`,"certifications"===a&&`發證單位：${c.issuer}`,"experiences"===a&&c.company]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:(0,v.formatDate)(c.created_at||c.issue_date)})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{i(c),k(a)},children:(0,b.jsx)(q,{className:"h-4 w-4"})})})]},c.id))}):(0,b.jsxs)("div",{className:"text-center py-16",children:[F&&(0,b.jsx)(F.icon,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:["目前沒有待審核的",F?.label]}),(0,b.jsx)("p",{className:"text-slate-600",children:"所有項目都已處理完畢"})]})})}),(0,b.jsx)(w,{isOpen:!!h,onClose:()=>i(null),type:j,item:h,onApprove:()=>{if(h)switch(j){case"users":s.mutate(h.id,{onSuccess:()=>i(null)});break;case"companies":x.mutate(h.id,{onSuccess:()=>i(null)});break;case"certifications":z.mutate(h.id,{onSuccess:()=>i(null)});break;case"experiences":B.mutate(h.id,{onSuccess:()=>i(null)})}},onReject:()=>{if(!h)return;let a=prompt("請輸入拒絕原因（選填）：");if(null!==a)switch(j){case"users":t.mutate({userId:h.id,reason:a||void 0},{onSuccess:()=>i(null)});break;case"companies":y.mutate({companyId:h.id,reason:a||void 0},{onSuccess:()=>i(null)});break;case"certifications":A.mutate({certId:h.id,reason:a||void 0},{onSuccess:()=>i(null)});break;case"experiences":C.mutate({expId:h.id,reason:a||void 0},{onSuccess:()=>i(null)})}},isLoading:G})]})}a.s(["default",()=>x],73602)}];

//# sourceMappingURL=app_%28admin%29_admin_approvals_page_tsx_a1f90e9b._.js.map