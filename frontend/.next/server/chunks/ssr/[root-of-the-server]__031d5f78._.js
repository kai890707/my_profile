module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},5522,a=>{"use strict";var b=a.i(87924);a.i(27232);var c=a.i(23177);let d=(0,a.i(72131).forwardRef)(({className:a,label:d,error:e,helperText:f,icon:g,size:h="default",...i},j)=>(0,b.jsxs)("div",{className:"space-y-2",children:[d&&(0,b.jsxs)("label",{className:"text-sm font-semibold text-slate-700",children:[d,i.required&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[g&&(0,b.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:g}),(0,b.jsx)("input",{ref:j,className:(0,c.cn)("flex w-full rounded-xl border-2 border-slate-200 bg-white px-4 py-2",g&&"pl-11",{default:"h-11 text-base",lg:"h-14 text-lg"}[h],"placeholder:text-slate-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500","hover:border-slate-300","transition-all duration-200","disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-slate-50",e&&"border-red-400 focus:ring-red-500 focus:border-red-500",a),...i})]}),e&&(0,b.jsxs)("p",{className:"text-sm text-red-600 flex items-center",children:[(0,b.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}),f&&!e&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:f})]}));d.displayName="Input",a.s(["Input",0,d])},45526,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(5522),f=a.i(40695),g=a.i(87682),h=a.i(3130),i=a.i(87532),j=a.i(33508),k=a.i(91168);function l({initialValues:a,onSearch:d}){let[l,m]=(0,c.useState)(a||{}),{data:n,isLoading:o}=(0,k.useIndustries)(),{data:p,isLoading:q}=(0,k.useRegions)();(0,c.useEffect)(()=>{a&&m(a)},[a]);let r=(a,b)=>{m(c=>({...c,[a]:b||void 0}))};return(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{className:"text-lg",children:"篩選條件"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),d(l)},className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"關鍵字"}),(0,b.jsx)(e.Input,{placeholder:"搜尋姓名、簡介...",value:l.keyword||"",onChange:a=>r("keyword",a.target.value),icon:(0,b.jsx)(i.Search,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"公司名稱"}),(0,b.jsx)(e.Input,{placeholder:"輸入公司名稱",value:l.company||"",onChange:a=>r("company",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"產業類別"}),(0,b.jsxs)(g.Select,{value:l.industry_id?.toString(),onValueChange:a=>{"all"===a?r("industry_id",void 0):r("industry_id",parseInt(a))},children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"全部產業"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"全部產業"}),n?.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"服務地區"}),(0,b.jsxs)(g.Select,{value:l.region_id?.toString(),onValueChange:a=>{"all"===a?r("region_id",void 0):r("region_id",parseInt(a))},children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"全部地區"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"全部地區"}),p?.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"排序方式"}),(0,b.jsxs)(g.Select,{value:l.sort||"latest",onValueChange:a=>r("sort",a),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"latest",children:"最新註冊"}),(0,b.jsx)(g.SelectItem,{value:"popular",children:"最受歡迎"}),(0,b.jsx)(g.SelectItem,{value:"relevant",children:"相關度"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsxs)(f.Button,{type:"submit",className:"flex-1",children:[(0,b.jsx)(i.Search,{className:"mr-2 h-4 w-4"}),"搜尋"]}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:()=>{let a={};m(a),d(a)},children:[(0,b.jsx)(j.X,{className:"mr-2 h-4 w-4"}),"重置"]})]})]})})]})}var m=a.i(73225),n=a.i(50463);let o=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var p=a.i(50522);function q(){let a=(0,d.useRouter)(),e=(0,d.useSearchParams)(),[g,j]=(0,c.useState)({keyword:e.get("keyword")||void 0,company:e.get("company")||void 0,industry_id:e.get("industry_id")?parseInt(e.get("industry_id")):void 0,region_id:e.get("region_id")?parseInt(e.get("region_id")):void 0,page:e.get("page")?parseInt(e.get("page")):1,per_page:20,sort:e.get("sort")||"latest"}),{data:q,isLoading:r,error:s}=(0,k.useSearchSalespersons)(g),t=b=>{let c=new URLSearchParams;Object.entries(b).forEach(([a,b])=>{null!=b&&""!==b&&c.set(a,b.toString())});let d=c.toString();a.push(d?`/search?${d}`:"/search",{scroll:!1})},u=a=>{let b={...a,page:1};j(b),t(b)},v=a=>{let b={...g,page:a};j(b),t(b),window.scrollTo({top:0,behavior:"smooth"})};return(0,b.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,b.jsx)("aside",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"sticky top-20",children:(0,b.jsx)(l,{initialValues:g,onSearch:u})})}),(0,b.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[q&&q.meta&&(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-slate-600",children:["找到 ",(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:q.meta.total})," 位業務員"]}),(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["第 ",q.meta.from||0,"-",q.meta.to||0," 筆，共 ",q.meta.total," 筆"]})]}),r&&(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(n.SalespersonCardSkeleton,{},c))}),s&&(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"py-12 text-center",children:(0,b.jsx)("p",{className:"text-red-600",children:"載入失敗，請稍後再試"})})}),!r&&q&&q.data&&q.data.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:q.data.map(a=>(0,b.jsx)(m.SalespersonCard,{salesperson:a},a.id))}),q.meta&&q.meta.last_page>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>v(q.meta.current_page-1),disabled:1===q.meta.current_page,children:(0,b.jsx)(o,{className:"h-4 w-4"})}),Array.from({length:q.meta.last_page},(a,b)=>b+1).filter(a=>{let b=q.meta.current_page;return 1===a||a===q.meta.last_page||a>=b-2&&a<=b+2}).map((a,c,d)=>{let e=c>0&&d[c-1]!==a-1;return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[e&&(0,b.jsx)("span",{className:"text-slate-400",children:"..."}),(0,b.jsx)(f.Button,{variant:a===q.meta.current_page?"default":"outline",size:"sm",onClick:()=>v(a),children:a})]},a)}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>v(q.meta.current_page+1),disabled:q.meta.current_page===q.meta.last_page,children:(0,b.jsx)(p.ChevronRight,{className:"h-4 w-4"})})]})]}),!r&&q&&q.data&&0===q.data.length&&(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardContent,{className:"py-16 text-center",children:[(0,b.jsx)(i.Search,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"找不到符合條件的業務員"}),(0,b.jsx)("p",{className:"text-slate-600 mb-6",children:"試著調整篩選條件或使用不同的關鍵字搜尋"}),(0,b.jsx)(f.Button,{onClick:()=>u({}),children:"清除所有篩選"})]})})]})]})}a.s(["SearchContent",()=>q],45526)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__031d5f78._.js.map