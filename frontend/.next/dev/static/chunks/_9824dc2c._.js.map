{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/utils/cn.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * Merge Tailwind CSS classes\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAKO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/utils/format.ts"],"sourcesContent":["/**\n * 格式化日期\n */\nexport function formatDate(date: string | Date): string {\n  return new Intl.DateTimeFormat('zh-TW', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n  }).format(new Date(date));\n}\n\n/**\n * 格式化相對時間\n */\nexport function formatRelativeTime(date: string | Date): string {\n  const now = new Date();\n  const target = new Date(date);\n  const diffInSeconds = Math.floor((now.getTime() - target.getTime()) / 1000);\n\n  if (diffInSeconds < 60) return '剛剛';\n  if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} 分鐘前`;\n  if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} 小時前`;\n  if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} 天前`;\n\n  return formatDate(date);\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;AACM,SAAS,WAAW,IAAmB;IAC5C,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC,IAAI,KAAK;AACrB;AAKO,SAAS,mBAAmB,IAAmB;IACpD,MAAM,MAAM,IAAI;IAChB,MAAM,SAAS,IAAI,KAAK;IACxB,MAAM,gBAAgB,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,OAAO,OAAO,EAAE,IAAI;IAEtE,IAAI,gBAAgB,IAAI,OAAO;IAC/B,IAAI,gBAAgB,MAAM,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,IAAI,IAAI,CAAC;IACxE,IAAI,gBAAgB,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,MAAM,IAAI,CAAC;IAC3E,IAAI,gBAAgB,QAAQ,OAAO,GAAG,KAAK,KAAK,CAAC,gBAAgB,OAAO,GAAG,CAAC;IAE5E,OAAO,WAAW;AACpB"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/utils/index.ts"],"sourcesContent":["export * from './cn';\nexport * from './format';\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/components/ui/button.tsx"],"sourcesContent":["import { cn } from '@/lib/utils';\nimport { Loader2 } from 'lucide-react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'default' | 'secondary' | 'outline' | 'ghost' | 'link';\n  size?: 'default' | 'sm' | 'lg' | 'icon';\n  isLoading?: boolean;\n}\n\nexport function Button({\n  className,\n  variant = 'default',\n  size = 'default',\n  isLoading = false,\n  disabled,\n  children,\n  ...props\n}: ButtonProps) {\n  const sizes = {\n    default: 'h-10 px-4 py-2 text-base',\n    sm: 'h-8 px-3 py-1 text-sm rounded-lg',\n    lg: 'h-14 px-8 py-4 text-lg rounded-xl',\n    icon: 'h-10 w-10 p-2',\n  };\n\n  // 使用 inline styles 確保漸層和陰影效果\n  const getButtonStyle = () => {\n    if (disabled || isLoading) {\n      return {};\n    }\n\n    switch (variant) {\n      case 'default':\n        return {\n          background: 'linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)',\n          boxShadow: '0 10px 25px -5px rgba(14, 165, 233, 0.4), 0 8px 10px -6px rgba(14, 165, 233, 0.4)',\n        };\n      case 'secondary':\n        return {\n          background: 'linear-gradient(135deg, #14b8a6 0%, #0d9488 100%)',\n          boxShadow: '0 10px 25px -5px rgba(20, 184, 166, 0.4)',\n        };\n      default:\n        return {};\n    }\n  };\n\n  const variants = {\n    default: 'text-white',\n    secondary: 'text-white',\n    outline: 'border-2 border-blue-500 text-blue-600 hover:bg-blue-50',\n    ghost: 'hover:bg-blue-50 text-blue-600',\n    link: 'text-blue-600 underline-offset-4 hover:underline',\n  };\n\n  return (\n    <button\n      className={cn(\n        'inline-flex items-center justify-center rounded-xl font-bold transition-all duration-300 ease-out',\n        'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2',\n        'disabled:opacity-50 disabled:cursor-not-allowed',\n        'hover:brightness-110 hover:-translate-y-0.5',\n        'active:translate-y-0',\n        variants[variant],\n        sizes[size],\n        className\n      )}\n      style={getButtonStyle()}\n      disabled={disabled || isLoading}\n      {...props}\n    >\n      {isLoading && <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />}\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAQO,SAAS,OAAO,EACrB,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,YAAY,KAAK,EACjB,QAAQ,EACR,QAAQ,EACR,GAAG,OACS;IACZ,MAAM,QAAQ;QACZ,SAAS;QACT,IAAI;QACJ,IAAI;QACJ,MAAM;IACR;IAEA,6BAA6B;IAC7B,MAAM,iBAAiB;QACrB,IAAI,YAAY,WAAW;YACzB,OAAO,CAAC;QACV;QAEA,OAAQ;YACN,KAAK;gBACH,OAAO;oBACL,YAAY;oBACZ,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,YAAY;oBACZ,WAAW;gBACb;YACF;gBACE,OAAO,CAAC;QACZ;IACF;IAEA,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;QACP,MAAM;IACR;IAEA,qBACE,6LAAC;QACC,WAAW,IAAA,2HAAE,EACX,qGACA,2GACA,mDACA,+CACA,wBACA,QAAQ,CAAC,QAAQ,EACjB,KAAK,CAAC,KAAK,EACX;QAEF,OAAO;QACP,UAAU,YAAY;QACrB,GAAG,KAAK;;YAER,2BAAa,6LAAC,+NAAO;gBAAC,WAAU;;;;;;YAChC;;;;;;;AAGP;KAlEgB"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/components/ui/input.tsx"],"sourcesContent":["import { cn } from '@/lib/utils';\nimport { forwardRef } from 'react';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n  helperText?: string;\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ className, label, error, helperText, ...props }, ref) => {\n    return (\n      <div className=\"space-y-2\">\n        {label && (\n          <label className=\"text-sm font-semibold text-slate-700\">\n            {label}\n            {props.required && <span className=\"text-red-500 ml-1\">*</span>}\n          </label>\n        )}\n        <input\n          ref={ref}\n          className={cn(\n            'flex h-11 w-full rounded-xl border-2 border-slate-200 bg-white px-4 py-2 text-base',\n            'placeholder:text-slate-400',\n            'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500',\n            'hover:border-slate-300',\n            'transition-all duration-200',\n            'disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-slate-50',\n            error && 'border-red-400 focus:ring-red-500 focus:border-red-500',\n            className\n          )}\n          {...props}\n        />\n        {error && (\n          <p className=\"text-sm text-red-600 flex items-center\">\n            <svg className=\"h-4 w-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n            </svg>\n            {error}\n          </p>\n        )}\n        {helperText && !error && <p className=\"text-sm text-slate-500\">{helperText}</p>}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAQO,MAAM,sBAAQ,IAAA,2KAAU,OAC7B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,OAAO,EAAE;IAClD,qBACE,6LAAC;QAAI,WAAU;;YACZ,uBACC,6LAAC;gBAAM,WAAU;;oBACd;oBACA,MAAM,QAAQ,kBAAI,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAG3D,6LAAC;gBACC,KAAK;gBACL,WAAW,IAAA,2HAAE,EACX,sFACA,8BACA,mFACA,0BACA,+BACA,wEACA,SAAS,0DACT;gBAED,GAAG,KAAK;;;;;;YAEV,uBACC,6LAAC;gBAAE,WAAU;;kCACX,6LAAC;wBAAI,WAAU;wBAAe,MAAK;wBAAe,SAAQ;kCACxD,cAAA,6LAAC;4BAAK,UAAS;4BAAU,GAAE;4BAAoH,UAAS;;;;;;;;;;;oBAEzJ;;;;;;;YAGJ,cAAc,CAAC,uBAAS,6LAAC;gBAAE,WAAU;0BAA0B;;;;;;;;;;;;AAGtE;;AAGF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/auth/token.ts"],"sourcesContent":["import axios from 'axios';\n\nconst ACCESS_TOKEN_KEY = 'access_token';\nconst REFRESH_TOKEN_KEY = 'refresh_token';\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8080/api';\n\ninterface RefreshResponse {\n  status: 'success';\n  data: {\n    access_token: string;\n    expires_in: number;\n  };\n  message: string;\n}\n\nexport function getAccessToken(): string | null {\n  if (typeof window === 'undefined') return null;\n  return localStorage.getItem(ACCESS_TOKEN_KEY);\n}\n\nexport function setAccessToken(token: string): void {\n  if (typeof window === 'undefined') return;\n  localStorage.setItem(ACCESS_TOKEN_KEY, token);\n}\n\nexport function getRefreshToken(): string | null {\n  if (typeof window === 'undefined') return null;\n  return localStorage.getItem(REFRESH_TOKEN_KEY);\n}\n\nexport function setRefreshToken(token: string): void {\n  if (typeof window === 'undefined') return;\n  localStorage.setItem(REFRESH_TOKEN_KEY, token);\n}\n\nexport function clearTokens(): void {\n  if (typeof window === 'undefined') return;\n  localStorage.removeItem(ACCESS_TOKEN_KEY);\n  localStorage.removeItem(REFRESH_TOKEN_KEY);\n}\n\nexport async function refreshAccessToken(): Promise<string | null> {\n  const refreshToken = getRefreshToken();\n  if (!refreshToken) return null;\n\n  try {\n    const response = await axios.post<RefreshResponse>(\n      `${API_BASE_URL}/auth/refresh`,\n      { refresh_token: refreshToken }\n    );\n\n    const newAccessToken = response.data.data.access_token;\n    setAccessToken(newAccessToken);\n    return newAccessToken;\n  } catch (error) {\n    clearTokens();\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAIqB;AAJrB;;AAEA,MAAM,mBAAmB;AACzB,MAAM,oBAAoB;AAC1B,MAAM,eAAe,iEAAwC;AAWtD,SAAS;IACd;;IACA,OAAO,aAAa,OAAO,CAAC;AAC9B;AAEO,SAAS,eAAe,KAAa;IAC1C;;IACA,aAAa,OAAO,CAAC,kBAAkB;AACzC;AAEO,SAAS;IACd;;IACA,OAAO,aAAa,OAAO,CAAC;AAC9B;AAEO,SAAS,gBAAgB,KAAa;IAC3C;;IACA,aAAa,OAAO,CAAC,mBAAmB;AAC1C;AAEO,SAAS;IACd;;IACA,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;AAC1B;AAEO,eAAe;IACpB,MAAM,eAAe;IACrB,IAAI,CAAC,cAAc,OAAO;IAE1B,IAAI;QACF,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAC/B,GAAG,aAAa,aAAa,CAAC,EAC9B;YAAE,eAAe;QAAa;QAGhC,MAAM,iBAAiB,SAAS,IAAI,CAAC,IAAI,CAAC,YAAY;QACtD,eAAe;QACf,OAAO;IACT,EAAE,OAAO,OAAO;QACd;QACA,OAAO;IACT;AACF"}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/api/client.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosError, InternalAxiosRequestConfig } from 'axios';\nimport { getAccessToken, refreshAccessToken, clearTokens } from '@/lib/auth/token';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8080/api';\n\nconst apiClient: AxiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request Interceptor - 自動添加 Token\napiClient.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    const token = getAccessToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response Interceptor - 處理 Token 過期\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\n\n    // Token 過期，嘗試續期\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const newToken = await refreshAccessToken();\n        if (newToken && originalRequest.headers) {\n          originalRequest.headers.Authorization = `Bearer ${newToken}`;\n          return apiClient(originalRequest);\n        }\n      } catch (refreshError) {\n        // Refresh 失敗，清除 Token 並導向登入\n        clearTokens();\n        if (typeof window !== 'undefined') {\n          window.location.href = '/login';\n        }\n        return Promise.reject(refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n"],"names":[],"mappings":";;;;AAGqB;AAHrB;AACA;;;AAEA,MAAM,eAAe,iEAAwC;AAE7D,MAAM,YAA2B,mJAAK,CAAC,MAAM,CAAC;IAC5C,SAAS;IACT,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,mCAAmC;AACnC,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ,IAAA,yIAAc;IAC5B,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,qCAAqC;AACrC,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,gBAAgB;IAChB,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,6IAAkB;YACzC,IAAI,YAAY,gBAAgB,OAAO,EAAE;gBACvC,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,UAAU;gBAC5D,OAAO,UAAU;YACnB;QACF,EAAE,OAAO,cAAc;YACrB,4BAA4B;YAC5B,IAAA,sIAAW;YACX,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YACA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/api/auth.ts"],"sourcesContent":["import apiClient from './client';\nimport { setAccessToken, setRefreshToken, clearTokens } from '@/lib/auth/token';\nimport type {\n  RegisterRequest,\n  LoginRequest,\n  User,\n  ApiResponse,\n  AuthResponse,\n} from '@/types/api';\n\n/**\n * 業務員註冊\n */\nexport async function register(data: RegisterRequest): Promise<ApiResponse<{ user: User; profile: any }>> {\n  const response = await apiClient.post<ApiResponse<{ user: User; profile: any }>>('/auth/register', data);\n  return response.data;\n}\n\n/**\n * 使用者登入\n */\nexport async function login(credentials: LoginRequest): Promise<ApiResponse<AuthResponse>> {\n  const response = await apiClient.post<ApiResponse<AuthResponse>>('/auth/login', credentials);\n\n  // 儲存 Token\n  if (response.data.data) {\n    const { access_token, refresh_token } = response.data.data;\n    setAccessToken(access_token);\n    setRefreshToken(refresh_token);\n  }\n\n  return response.data;\n}\n\n/**\n * 使用者登出\n */\nexport async function logout(): Promise<void> {\n  try {\n    await apiClient.post('/auth/logout');\n  } finally {\n    // 無論成功失敗都清除本地 Token\n    clearTokens();\n  }\n}\n\n/**\n * 取得當前使用者資訊\n */\nexport async function getCurrentUser(): Promise<ApiResponse<User>> {\n  const response = await apiClient.get<ApiResponse<User>>('/auth/me');\n  return response.data;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAYO,eAAe,SAAS,IAAqB;IAClD,MAAM,WAAW,MAAM,kIAAS,CAAC,IAAI,CAA4C,kBAAkB;IACnG,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe,MAAM,WAAyB;IACnD,MAAM,WAAW,MAAM,kIAAS,CAAC,IAAI,CAA4B,eAAe;IAEhF,WAAW;IACX,IAAI,SAAS,IAAI,CAAC,IAAI,EAAE;QACtB,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,GAAG,SAAS,IAAI,CAAC,IAAI;QAC1D,IAAA,yIAAc,EAAC;QACf,IAAA,0IAAe,EAAC;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,kIAAS,CAAC,IAAI,CAAC;IACvB,SAAU;QACR,oBAAoB;QACpB,IAAA,sIAAW;IACb;AACF;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM,kIAAS,CAAC,GAAG,CAAoB;IACxD,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/lib/query/keys.ts"],"sourcesContent":["import type { SearchParams } from '@/types/api';\n\nexport const queryKeys = {\n  auth: {\n    me: ['auth', 'me'] as const,\n  },\n  search: {\n    salespersons: (params: SearchParams) => ['search', 'salespersons', params] as const,\n    detail: (id: number) => ['search', 'salespersons', id] as const,\n  },\n  salesperson: {\n    profile: ['salesperson', 'profile'] as const,\n    experiences: ['salesperson', 'experiences'] as const,\n    certifications: ['salesperson', 'certifications'] as const,\n    approvalStatus: ['salesperson', 'approval-status'] as const,\n  },\n  admin: {\n    pendingApprovals: ['admin', 'pending-approvals'] as const,\n    users: ['admin', 'users'] as const,\n    statistics: ['admin', 'statistics'] as const,\n    industries: ['admin', 'settings', 'industries'] as const,\n    regions: ['admin', 'settings', 'regions'] as const,\n  },\n} as const;\n"],"names":[],"mappings":";;;;AAEO,MAAM,YAAY;IACvB,MAAM;QACJ,IAAI;YAAC;YAAQ;SAAK;IACpB;IACA,QAAQ;QACN,cAAc,CAAC,SAAyB;gBAAC;gBAAU;gBAAgB;aAAO;QAC1E,QAAQ,CAAC,KAAe;gBAAC;gBAAU;gBAAgB;aAAG;IACxD;IACA,aAAa;QACX,SAAS;YAAC;YAAe;SAAU;QACnC,aAAa;YAAC;YAAe;SAAc;QAC3C,gBAAgB;YAAC;YAAe;SAAiB;QACjD,gBAAgB;YAAC;YAAe;SAAkB;IACpD;IACA,OAAO;QACL,kBAAkB;YAAC;YAAS;SAAoB;QAChD,OAAO;YAAC;YAAS;SAAQ;QACzB,YAAY;YAAC;YAAS;SAAa;QACnC,YAAY;YAAC;YAAS;YAAY;SAAa;QAC/C,SAAS;YAAC;YAAS;YAAY;SAAU;IAC3C;AACF"}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/hooks/useAuth.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useRouter } from 'next/navigation';\nimport { toast } from 'sonner';\nimport { login, logout, register, getCurrentUser } from '@/lib/api/auth';\nimport { queryKeys } from '@/lib/query/keys';\nimport type { LoginRequest, RegisterRequest } from '@/types/api';\n\n/**\n * 取得當前使用者資訊\n */\nexport function useAuth() {\n  return useQuery({\n    queryKey: queryKeys.auth.me,\n    queryFn: getCurrentUser,\n    retry: false,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n}\n\n/**\n * 登入 Mutation\n */\nexport function useLogin() {\n  const router = useRouter();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: login,\n    onSuccess: (data) => {\n      // 刷新使用者資料\n      queryClient.invalidateQueries({ queryKey: queryKeys.auth.me });\n\n      toast.success(data.message || '登入成功');\n\n      // 根據角色導向對應頁面\n      const user = data.data?.user;\n      if (user?.role === 'admin') {\n        router.push('/admin');\n      } else if (user?.role === 'salesperson') {\n        router.push('/dashboard');\n      } else {\n        router.push('/');\n      }\n    },\n    onError: (error: any) => {\n      const message = error.response?.data?.message || '登入失敗';\n      toast.error(message);\n    },\n  });\n}\n\n/**\n * 登出 Mutation\n */\nexport function useLogout() {\n  const router = useRouter();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: logout,\n    onSuccess: () => {\n      // 清除所有快取\n      queryClient.clear();\n\n      toast.success('登出成功');\n      router.push('/login');\n    },\n    onError: () => {\n      // 即使登出失敗也清除本地資料並導向登入頁\n      queryClient.clear();\n      router.push('/login');\n    },\n  });\n}\n\n/**\n * 註冊 Mutation\n */\nexport function useRegister() {\n  const router = useRouter();\n\n  return useMutation({\n    mutationFn: register,\n    onSuccess: (data) => {\n      toast.success(data.message || '註冊成功，請等待管理員審核');\n      router.push('/login');\n    },\n    onError: (error: any) => {\n      const message = error.response?.data?.message || '註冊失敗';\n      const errors = error.response?.data?.errors;\n\n      if (errors) {\n        // 顯示驗證錯誤\n        Object.values(errors).flat().forEach((err) => {\n          toast.error(err as string);\n        });\n      } else {\n        toast.error(message);\n      }\n    },\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAMO,SAAS;;IACd,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU,oIAAS,CAAC,IAAI,CAAC,EAAE;QAC3B,SAAS,uIAAc;QACvB,OAAO;QACP,WAAW,IAAI,KAAK;IACtB;AACF;GAPgB;;QACP,0LAAQ;;;AAWV,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,cAAc,IAAA,2MAAc;IAElC,OAAO,IAAA,gMAAW,EAAC;QACjB,YAAY,8HAAK;QACjB,SAAS;oCAAE,CAAC;gBACV,UAAU;gBACV,YAAY,iBAAiB,CAAC;oBAAE,UAAU,oIAAS,CAAC,IAAI,CAAC,EAAE;gBAAC;gBAE5D,oJAAK,CAAC,OAAO,CAAC,KAAK,OAAO,IAAI;gBAE9B,aAAa;gBACb,MAAM,OAAO,KAAK,IAAI,EAAE;gBACxB,IAAI,MAAM,SAAS,SAAS;oBAC1B,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,MAAM,SAAS,eAAe;oBACvC,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF;;QACA,OAAO;oCAAE,CAAC;gBACR,MAAM,UAAU,MAAM,QAAQ,EAAE,MAAM,WAAW;gBACjD,oJAAK,CAAC,KAAK,CAAC;YACd;;IACF;AACF;IA3BgB;;QACC,kJAAS;QACJ,2MAAc;QAE3B,gMAAW;;;AA4Bb,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,cAAc,IAAA,2MAAc;IAElC,OAAO,IAAA,gMAAW,EAAC;QACjB,YAAY,+HAAM;QAClB,SAAS;qCAAE;gBACT,SAAS;gBACT,YAAY,KAAK;gBAEjB,oJAAK,CAAC,OAAO,CAAC;gBACd,OAAO,IAAI,CAAC;YACd;;QACA,OAAO;qCAAE;gBACP,sBAAsB;gBACtB,YAAY,KAAK;gBACjB,OAAO,IAAI,CAAC;YACd;;IACF;AACF;IAnBgB;;QACC,kJAAS;QACJ,2MAAc;QAE3B,gMAAW;;;AAoBb,SAAS;;IACd,MAAM,SAAS,IAAA,kJAAS;IAExB,OAAO,IAAA,gMAAW,EAAC;QACjB,YAAY,iIAAQ;QACpB,SAAS;uCAAE,CAAC;gBACV,oJAAK,CAAC,OAAO,CAAC,KAAK,OAAO,IAAI;gBAC9B,OAAO,IAAI,CAAC;YACd;;QACA,OAAO;uCAAE,CAAC;gBACR,MAAM,UAAU,MAAM,QAAQ,EAAE,MAAM,WAAW;gBACjD,MAAM,SAAS,MAAM,QAAQ,EAAE,MAAM;gBAErC,IAAI,QAAQ;oBACV,SAAS;oBACT,OAAO,MAAM,CAAC,QAAQ,IAAI,GAAG,OAAO;mDAAC,CAAC;4BACpC,oJAAK,CAAC,KAAK,CAAC;wBACd;;gBACF,OAAO;oBACL,oJAAK,CAAC,KAAK,CAAC;gBACd;YACF;;IACF;AACF;IAvBgB;;QACC,kJAAS;QAEjB,gMAAW"}},
    {"offset": {"line": 631, "column": 0}, "map": {"version":3,"sources":["file:///Users/kai/KAA/my_profile/frontend/app/%28auth%29/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport Link from 'next/link';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { useLogin } from '@/hooks/useAuth';\n\nconst loginSchema = z.object({\n  email: z.string().email('請輸入有效的電子郵件'),\n  password: z.string().min(8, '密碼至少需要 8 個字元'),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport default function LoginPage() {\n  const login = useLogin();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  const onSubmit = (data: LoginForm) => {\n    login.mutate(data);\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-3xl font-bold text-foreground\">登入</h2>\n        <p className=\"text-slate-600 mt-2 text-base\">歡迎回來！請登入您的帳號</p>\n      </div>\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-5\">\n        <Input\n          label=\"電子郵件\"\n          type=\"email\"\n          placeholder=\"your@email.com\"\n          error={errors.email?.message}\n          required\n          {...register('email')}\n        />\n\n        <Input\n          label=\"密碼\"\n          type=\"password\"\n          placeholder=\"請輸入至少 8 個字元\"\n          error={errors.password?.message}\n          required\n          {...register('password')}\n        />\n\n        <div className=\"pt-4\">\n          <Button\n            type=\"submit\"\n            className=\"w-full text-xl font-bold tracking-wide\"\n            size=\"lg\"\n            isLoading={login.isPending}\n          >\n            {login.isPending ? '登入中...' : '登入'}\n          </Button>\n        </div>\n\n        <div className=\"text-center\">\n          <a href=\"#\" className=\"text-sm text-primary-600 hover:text-primary-700 hover:underline\">\n            忘記密碼？\n          </a>\n        </div>\n      </form>\n\n      <div className=\"relative\">\n        <div className=\"absolute inset-0 flex items-center\">\n          <div className=\"w-full border-t border-slate-200\"></div>\n        </div>\n        <div className=\"relative flex justify-center text-sm\">\n          <span className=\"px-4 bg-white text-slate-500\">還沒有帳號？</span>\n        </div>\n      </div>\n\n      <div className=\"text-center\">\n        <Link\n          href=\"/register\"\n          className=\"inline-flex items-center justify-center text-primary-600 font-semibold hover:text-primary-700 transition-colors\"\n        >\n          立即註冊 →\n        </Link>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUA,MAAM,cAAc,qLAAC,CAAC,MAAM,CAAC;IAC3B,OAAO,qLAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,qLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAIe,SAAS;;IACtB,MAAM,QAAQ,IAAA,+HAAQ;IAEtB,MAAM,EACJ,QAAQ,EACR,YAAY,EACZ,WAAW,EAAE,MAAM,EAAE,EACtB,GAAG,IAAA,4KAAO,EAAY;QACrB,UAAU,IAAA,gLAAW,EAAC;IACxB;IAEA,MAAM,WAAW,CAAC;QAChB,MAAM,MAAM,CAAC;IACf;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6LAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAG/C,6LAAC;gBAAK,UAAU,aAAa;gBAAW,WAAU;;kCAChD,6LAAC,sIAAK;wBACJ,OAAM;wBACN,MAAK;wBACL,aAAY;wBACZ,OAAO,OAAO,KAAK,EAAE;wBACrB,QAAQ;wBACP,GAAG,SAAS,QAAQ;;;;;;kCAGvB,6LAAC,sIAAK;wBACJ,OAAM;wBACN,MAAK;wBACL,aAAY;wBACZ,OAAO,OAAO,QAAQ,EAAE;wBACxB,QAAQ;wBACP,GAAG,SAAS,WAAW;;;;;;kCAG1B,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,wIAAM;4BACL,MAAK;4BACL,WAAU;4BACV,MAAK;4BACL,WAAW,MAAM,SAAS;sCAEzB,MAAM,SAAS,GAAG,WAAW;;;;;;;;;;;kCAIlC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,MAAK;4BAAI,WAAU;sCAAkE;;;;;;;;;;;;;;;;;0BAM5F,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;;;;;;;;;;kCAEjB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;;;;;;0BAInD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,0KAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;GA9EwB;;QACR,+HAAQ;QAMlB,4KAAO;;;KAPW"}}]
}